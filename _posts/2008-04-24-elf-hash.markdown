---
status: publish
published: true
title: ELF Hash
author:
  display_name: twcai
  login: admin
  email: clumsywyvern@gmail.com
  url: http://www.caitengwei.com
author_login: admin
author_email: clumsywyvern@gmail.com
author_url: http://www.caitengwei.com
wordpress_id: 158
wordpress_url: http://child.kilu.de/blog/?p=158
date: '2008-04-24 18:16:13 +0800'
date_gmt: '2008-04-24 10:16:13 +0800'
categories:
- ACM&#47;ICPC
tags:
- ELF hash
comments:
- id: 2745
  author: "两种字符串hash：ELF 和 BKDR | Wzk &amp; VAC_DTerH"
  author_email: ''
  author_url: http://vacdterh.tk/?p=197
  date: '2012-07-26 19:33:19 +0800'
  date_gmt: '2012-07-27 03:33:19 +0800'
  content: "[...] 看了一下这位大神的：http:&#47;&#47;caitengwei.com&#47;blog&#47;algorithm-match&#47;acmicpc&#47;elf-hash&#47;
    [...]"
---
<p>ELF hash是对字符串进行hash操作时的常用函数<br />
这个算法将一个字符串的数组中的每个元素依次按前四位与上一个元素的低四位相与，组成一个长整形，如果长整的高四位大于零，那么就将它折回再与长整的低四位相异或，要注意最后得到的整型不是唯一的，一开始因为不知道这个吃过亏。</p>
<pre class="prettyprint">int ELFhash(char *key)<br />
{<br />
    unsigned long h = 0;<br />
    unsigned long g;<br />
    while( *key )<br />
    {<br />
        h =( h<< 4) + *key++;<br />
        g = h & 0xf0000000L;<br />
        if( g ) h ^= g >> 24;<br />
        h &= ~g;<br />
    }<br />
    return h;<br />
}<&#47;pre></p>
